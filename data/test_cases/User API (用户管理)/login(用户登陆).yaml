- name: "用户登录接口"
  description: "测试用户登录成功"
  request:
    method: POST
    data_type: "form"
    url: "/eviappnew/v3/AppV3/user/login"
    headers:
      User-Agent: "Apache-HttpClient/4.5.7"
      Accept-Encoding: "gzip, deflate"
      accept: "application/json"
      Connection: "keep-alive"
      Content-Type: "application/x-www-form-urlencoded"
      charset: "UTF-8"
      Content-Length: "0"
      gatewayVersion: "1.0.0"
      X-Auth-TestFlag: "8e852121-df35-48cb-98c8-42f2dd5eab72"
      X-Auth-ReqFlag: "open"
    data:
      loginname: "${username}" # 从env_config.yaml获取
      password: "${password}"
      type: "1"
  extract:
    X-Auth-Code: jsonpath:$.data[0].user_uniquecode
    x_Auth_Token: jsonpath:$.data[0].x_Auth_Token
  expect:
    status_code: 200
    headers:
      Content-Type: application/json;charset=UTF-8
    body:
      message: "登录成功！"
  validate:
    - "response.get('result') == 1"
    - "response.get('data')[0].get('real_name') == '汪桂凤'"
    - "len(response.get('data')[0]) == 28"
    - "response.get('data')[0].get('mobile') == '13915916916'"
    - "response.get('data')[0].get('user_uniquecode') == '8bf38f031ba946effb90099bcc81187d'"





- name: "用户登录接口"
  description: "测试用户登录失败"
  request:
    method: POST
    data_type: "form"
    url: "/eviappnew/v3/AppV3/user/login"
    headers:
      User-Agent: "Apache-HttpClient/4.5.7"
      Accept-Encoding: "gzip, deflate"
      accept: "application/json"
      Connection: "keep-alive"
      Content-Type: "application/x-www-form-urlencoded"
      charset: "UTF-8"
      Content-Length: "0"
      gatewayVersion: "1.0.0"
      X-Auth-TestFlag: "8e852121-df35-48cb-98c8-42f2dd5eab72"
      X-Auth-ReqFlag: "open"
    data:
      loginname: "13915916916" # 从env_config.yaml获取
      password: "3344"
      type: "1"
#  extract:
#    X-Auth-Code: jsonpath:$.data[0].user_uniquecode
#    x_Auth_Token: jsonpath:$.data[0].x_Auth_Token
  expect:
    status_code: 200
    headers:
      Content-Type: application/json;charset=UTF-8
    body:
      message: "登录失败,账号或密码错误！"
  validate:
    - "response.get('result') == 0"
    - "response.get('data') == []"